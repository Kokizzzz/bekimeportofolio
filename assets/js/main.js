// Language dictionary (DE default)
const TRANSLATIONS = {
  de: {
    // META / BRAND
    'meta.title': 'Bekime Pflege — Betreuung für werdende Mütter & Neugeborene',
    'meta.description': 'Einfühlsame Hausbesuche für Schwangere und Babys in Ihrer Nähe. Professionelle Unterstützung, die Ihnen Sicherheit gibt.',
    'meta.title_services': 'Leistungen – Bekime Pflege',
    'meta.desc_services': 'Schwangerenbetreuung, Wochenbettpflege, Stillberatung und Babypflege als Hausbesuch.',
    'meta.title_about': 'Über mich – Bekime Pflege',
    'meta.desc_about': 'Erfahren Sie mehr über Bekime: Werte, Ausbildung und Motivation für einfühlsame Betreuung.',
    'meta.title_contact': 'Kontakt – Bekime Pflege',
    'meta.desc_contact': 'Nehmen Sie Kontakt auf für ein unverbindliches Erstgespräch oder eine Terminvereinbarung.',
    'brand.name': 'Bekime Pflege',
    'brand.rights': 'Alle Rechte vorbehalten.',

    // NAV
    'nav.home': 'Start',
    'nav.services': 'Leistungen',
    'nav.about': 'Über mich',
    'nav.contact': 'Kontakt',

    // HOME
    'home.hero_title': 'Einfühlsame Betreuung für werdende Mütter & Neugeborene',
    'home.hero_sub': 'Ich komme zu Ihnen nach Hause – mit Ruhe, Wärme und Fachwissen.',
    'home.cta_services': 'Leistungen ansehen',
    'home.cta_contact': 'Kontakt aufnehmen',
    'home.usp_1_t': 'Hausbesuche',
    'home.usp_1_d': 'Flexible Termine bei Ihnen zuhause – für Geborgenheit und Entlastung.',
    'home.usp_2_t': 'Ganzheitlich',
    'home.usp_2_d': 'Unterstützung vor und nach der Geburt: Körper, Geist und Alltag.',
    'home.usp_3_t': 'Erfahren & warmherzig',
    'home.usp_3_d': 'Professionell, zuverlässig und mit viel Herz – damit Sie sich sicher fühlen.',
    'home.gallery_t': 'Sanfte Momente',
    'home.gallery_d': 'Fügen Sie hier 3–6 helle, natürliche Fotos hinzu (Neugeborene, Hände, Kuschel-Motive).',
    'home.cta_wide_t': 'Bereit für ein unverbindliches Gespräch?',
    'home.cta_wide_btn': 'Jetzt Termin anfragen',

    // SERVICES (base)
    'services.title': 'Leistungen',
    'services.intro': 'Individuelle Unterstützung rund um Schwangerschaft, Geburt und die erste Zeit mit Baby.',
    'services.preg_title': 'Schwangerenbetreuung',
    'services.preg_desc': 'Aufklärung, Wohlbefinden, Vorbereitung auf Geburt – entspannter durch die Schwangerschaft.',
    'services.post_title': 'Wochenbettpflege',
    'services.post_desc': 'Schonung, Rückbildung, Rituale, Schlaf – ich bin an Ihrer Seite in den ersten Wochen.',
    'services.baby_title': 'Babypflege & Beruhigung',
    'services.baby_desc': 'Sicheres Baden, Wickeln, Tragen, beruhigende Routinen – liebevoll & kompetent.',
    'services.lact_title': 'Still-/Ernährungsberatung',
    'services.lact_desc': 'Unterstützung beim Stillen oder Fläschchen – bedürfnisorientiert & praktisch.',
    'services.night_title': 'Nachtbetreuung',
    'services.night_desc': 'Entlastung in der Nacht, damit Sie Kraft sammeln können.',
    'services.home_title': 'Hausbesuche',
    'services.home_desc': 'Planbare Termine bei Ihnen zuhause in Ihrer Region.',

    // PRICING (extended)
    'pricing.title': 'Transparente Preise',
    'pricing.basic_t': 'Erstgespräch',
    'pricing.basic_d': '30–45 Min. Telefonat oder Video – Bedarf klären, Fragen beantworten.',
    'pricing.visit_t': 'Hausbesuch',
    'pricing.visit_d': 'Pro Stunde. Fahrkosten je nach Entfernung.',
    'pricing.night_t': 'Nachtpaket',
    'pricing.night_d': '3–4 Std. abends oder nachts – auf Anfrage.',
    'pricing.note': 'Hinweis: Keine medizinische Behandlung. Bei Komplikationen bitte Arzt/Ärztin oder Hebamme kontaktieren.',
    'pricing.basic_price': '€40',
    'pricing.basic_unit': '/ 30–45 Min',
    'pricing.basic_f1': 'Telefon/Video',
    'pricing.basic_f2': 'Bedarf klären',
    'pricing.basic_f3': 'Fragen beantworten',
    'pricing.popular': 'Beliebt',
    'pricing.visit_price': '€60',
    'pricing.per_hour': '/ Stunde',
    'pricing.visit_f1': 'Vor Ort bei Ihnen',
    'pricing.visit_f2': 'Individuelle Themen',
    'pricing.visit_f3': 'Fahrkosten nach Entfernung',
    'pricing.night_title2': 'Abend-/Nachtpaket',
    'pricing.night_price': 'ab €180',
    'pricing.night_unit': '/ 3–4 Std',
    'pricing.night_f1': 'Ruhige Begleitung',
    'pricing.night_f2': 'Schlaf & Fütterung',
    'pricing.night_f3': 'Auf Anfrage erweiterbar',
    'pricing.note_ext': 'Hinweis: Keine medizinische Behandlung. Bei Komplikationen bitte Arzt/Ärztin oder Hebamme kontaktieren.',

    // MEMBERSHIPS
    'memberships.title': 'Pakete & Monatsbetreuung',
    'memberships.kicker': 'Planbare Entlastung – flexibel kündbar, Rechnungszahlung oder Barzahlung möglich.',
    'membership.bundle': 'Bundle',
    'membership.monthly': 'Monatlich',
    'membership.comfort_t': 'Komfort (3 Besuche)',
    'membership.comfort_price': '€165',
    'membership.comfort_note': '(statt €180)',
    'membership.comfort_f1': '3× 1-stündige Hausbesuche',
    'membership.comfort_f2': 'Priorisierte Terminvergabe',
    'membership.comfort_f3': 'WhatsApp-Check-in (werktags)',
    'membership.premium_t': 'Premium (6 Besuche)',
    'membership.premium_price': '€320',
    'membership.premium_note': '(statt €360)',
    'membership.premium_f1': '6× 1-stündige Hausbesuche',
    'membership.premium_f2': '1× Abend-Check-in inkl.',
    'membership.premium_f3': 'Individuelle Wochenplanung',
    'membership.basic_t': 'Basis Betreuung',
    'membership.basic_price': '€120/Monat',
    'membership.basic_f1': '2 Std. pro Monat (Hausbesuche)',
    'membership.basic_f2': 'Roll-over: +1 Std. in Folgemonat',
    'membership.basic_f3': 'Kündbar monatlich',
    'membership.plus_t': 'Plus Betreuung',
    'membership.plus_price': '€220/Monat',
    'membership.plus_f1': '4 Std. pro Monat',
    'membership.plus_f2': 'WhatsApp-Support (werktags)',
    'membership.plus_f3': 'Kündbar monatlich',
    'membership.pay_note': 'Zahlung per Rechnung, bar oder Online-Payment (z. B. Stripe) möglich. Ermäßigungen für Alleinerziehende auf Anfrage.',

    // COMPARISON
    'compare.title': 'Vergleich',
    'compare.h.service': 'Leistung',
    'compare.h.single': 'Einzelbesuch',
    'compare.h.comfort': 'Komfort',
    'compare.h.premium': 'Premium',
    'compare.h.month_basic': 'Monat Basis',
    'compare.h.month_plus': 'Monat Plus',
    'compare.r.hours': 'Stunden/Monat',
    'compare.r.priority': 'Terminpriorität',
    'compare.r.whatsapp': 'WhatsApp-Support',
    'compare.r.evening': 'Abend-Check-in',
    // About page — extended
'about.tagline':'Hebamme & Familienbetreuung – ruhig, respektvoll, verlässlich.',
'about.summary_t':'Hallo, ich bin Bekime.',
'about.summary_p1':'Ich bin ausgebildete Hebamme und habe während meiner Ausbildung auf Level-1 Stationen über 300 Geburten begleitet. Auch bei herausfordernden Situationen bleibe ich ruhig – diese Ruhe hilft Eltern, sich sicher zu fühlen.',
'about.summary_p2':'Früher war ich u. a. für die tägliche Basisversorgung zuständig (Vitalzeichen, Untersuchungen). Heute unterstütze ich Familien mit einfühlsamen Hausbesuchen rund um Schwangerschaft, Wochenbett, Stillen und Babypflege.',
'about.fact_births_n':'300+','about.fact_births_t':'Geburten begleitet',
'about.fact_langs_n':'3','about.fact_langs_t':'Sprachen (DE/EN/AL)',
'about.fact_style_n':'100%','about.fact_style_t':'Ruhig & zuverlässig',

'about.help_t':'Wobei ich helfe',
'about.help_1':'Schwangerenbetreuung & Geburtsvorbereitung',
'about.help_2':'Wochenbettpflege & Erholung',
'about.help_3':'Stillen & Ernährung (auch Fläschchen)',
'about.help_4':'Babypflege, Baden, Tragen, Beruhigung',
'about.help_5':'Alltag strukturieren & Schlafroutinen',

'about.qual_t':'Qualifikation & Ausbildung',
'about.edu_midwife_t':'Ausbildung zur Hebamme',
'about.edu_midwife_d':'Staatlich geprüft (Tetovo, MK)',
'about.edu_bio_t':'Bachelor Biologie (Nebenfach Biochemie)',
'about.edu_bio_d':'Abschluss in den USA',
'about.edu_nursing_t':'Studium Krankenpflege',
'about.edu_nursing_d':'Bachelor in Nursing (USA)',
'about.edu_lang_t':'Sprachkompetenz',
'about.edu_lang_d':'Deutsch (C1), Englisch (fließend), Albanisch (Muttersprache)',

'about.exp_t':'Erfahrung (Auswahl)',
'about.exp_mid_assist_t':'Hebammenassistenz',
'about.exp_mid_assist_d':'Begleitung im Kreißsaal, Wochenbettstation, Elternanleitung',
'about.exp_onco_t':'Pflegehilfe (Onkologie)',
'about.exp_onco_d':'Einfühlsame Versorgung, Vitalzeichen, Basisaufgaben',
'about.exp_care_t':'Pflegehilfe',
'about.exp_care_d':'Unterstützung im Stationsalltag, Teamarbeit',
'about.exp_note':'Hinweis: Aus Gründen der Übersicht sind Arbeitgebernamen hier weggelassen.',

'about.extra_t':'Sprachen & Einsatzgebiet',
'about.langs_badge':'DE (C1) · EN (fließend) · AL (Muttersprache)',
'about.area_badge':'Einsatzgebiet: Struga & Umgebung',

'about.cta_t':'Lassen Sie uns sprechen.',
'about.cta_btn':'Unverbindliches Erstgespräch',
'about.only.lead':'Man sagt, dass Essen den Körper, Wissenschaft den Geist und Liebe die Seele nährt.',
'about.only.p1':'Diese Zusammenhänge spielen eine wichtige Rolle bei der Geburt und im weiteren Leben. Daher sind sie mir ein Leitbild.',
'about.only.p2':'Ich bin ausgebildete Hebamme und habe während meiner Ausbildung (Level 1) gemeinsam mit Hebammen und Ärzt*innen über 300 Geburten begleitet. In diesem Rahmen konnte ich viel Erfahrung im Umgang mit Geburtskomplikationen sammeln. Selbst bei schwierigen Situationen bleibe ich ruhig – diese Ruhe überträgt sich auf die werdenden Mütter.',
'about.only.p3':'Bereits früh war ich für die tägliche medizinische Grundversorgung sowie für Vorsorge, Geburt und Nachsorge verantwortlich.',
'about.only.p4':'Ich arbeite flexibel, konzentriert, liebevoll und fleißig – zukunftsorientiert und verantwortungsvoll. Mit Herz, mit Blick für das Ganze und mit der Bereitschaft, Verantwortung zu übernehmen. Gleichzeitig bringe ich die nötige emotionale Intelligenz mit, um mich gut in Teams einzufügen und Ihnen in Schwangerschaft und Wochenbett Stabilität zu geben.',
'about.only.p5':'Wenn ich Ihr Interesse geweckt habe, freue ich mich auf Ihre Nachricht.',
'about.only.sign':'Eure Hebamme<br/>Bekime Elezi',


'contact.email':'E-Mail:',
'contact.wa_t':'WhatsApp',
'contact.wa_prefer':'Am liebsten über WhatsApp – schnell und unkompliziert.',
'contact.wa_prefer_inline':'Oder schneller über WhatsApp:',
'contact.wa_hours':'Antwortzeiten: Mo–Fr 9–17 Uhr',
'btn.whatsapp':'WhatsApp-Chat starten',
'btn.whatsapp_short':'WhatsApp',
'contact.wa_prefill':'Hallo Bekime, ich hätte gern eine Beratung bzw. einen Termin. 😊',

    // PROCESS
    'process.title': 'So läuft’s',
    'process.s1_t': 'Kontakt',
    'process.s1_d': 'Kurze Anfrage senden – ich melde mich zeitnah.',
    'process.s2_t': 'Erstgespräch',
    'process.s2_d': '30–45 Min. zum Kennenlernen & Bedarf klären.',
    'process.s3_t': 'Plan',
    'process.s3_d': 'Individueller Besuchs- & Unterstützungsplan.',
    'process.s4_t': 'Begleitung',
    'process.s4_d': 'Hausbesuche, Routinen, beruhigende Rituale.',

    // TESTIMONIALS
    'testi.title': 'Stimmen von Eltern',
    'testi.1': '„Mit Bekime war die erste Woche zuhause so viel entspannter. Besonders die Abendbetreuung hat uns gerettet.“ — Anna & Tim',
    'testi.2': '„Sanft, ruhig, kompetent. Ich habe mich gesehen und unterstützt gefühlt.“ — Lea',
    'testi.3': '„Tolle Tipps zu Schlaf und Stillen – und immer erreichbar für kurze Fragen.“ — Familie D.',

    // FAQ
    'faq.title': 'Häufige Fragen',
    'faq.q1': 'Kassenleistung oder privat?',
    'faq.a1': 'Die Begleitung ist privat. Auf Wunsch stelle ich eine Rechnung zur Vorlage bei Zusatzversicherungen aus.',
    'faq.q2': 'Wie funktioniert die Monatsbetreuung?',
    'faq.a2': 'Stundenkontingent pro Monat, monatlich kündbar. Nicht genutzte 1 Stunde kann in den Folgemonat übertragen werden.',
    'faq.q3': 'Welche Region?',
    'faq.a3': 'Struga + Umgebung. Fahrkosten je nach Entfernung.',

    // BUTTONS
    'btn.contact_me': 'Kontakt aufnehmen',
    'btn.request': 'Termin anfragen',
    'btn.inquire': 'Anfragen',
    'btn.book': 'Buchen',
    'btn.start': 'Starten'
  },

  en: {
    // META / BRAND
    'meta.title': 'Bekime Care — Support for Expecting Mothers & Newborns',
    'meta.description': 'Gentle home visits for pregnant mothers and babies. Professional care that gives you confidence.',
    'meta.title_services': 'Services – Bekime Care',
    'meta.desc_services': 'Antenatal support, postpartum care, lactation guidance and baby care at home.',
    'meta.title_about': 'About – Bekime Care',
    'meta.desc_about': 'Learn about Bekime: values, training, and motivation for compassionate care.',
    'meta.title_contact': 'Contact – Bekime Care',
    'meta.desc_contact': 'Get in touch for a free intro call or to book a visit.',
    'brand.name': 'Bekime Care',
    'brand.rights': 'All rights reserved.',

    // NAV
    'nav.home': 'Home',
    'nav.services': 'Services',
    'nav.about': 'About',
    'nav.contact': 'Contact',

    // HOME
    'home.hero_title': 'Compassionate care for expecting mothers & newborns',
    'home.hero_sub': 'I visit your home with calm, warmth, and expertise.',
    'home.cta_services': 'View services',
    'home.cta_contact': 'Contact me',
    'home.usp_1_t': 'Home Visits',
    'home.usp_1_d': 'Flexible appointments at your home — comfort and relief.',
    'home.usp_2_t': 'Holistic',
    'home.usp_2_d': 'Support before and after birth: body, mind, and daily life.',
    'home.usp_3_t': 'Experienced & warm',
    'home.usp_3_d': 'Professional, reliable, and kind — so you feel safe.',
    'home.gallery_t': 'Gentle moments',
    'home.gallery_d': 'Add 3–6 bright, natural photos here (newborns, hands, cuddles).',
    'home.cta_wide_t': 'Ready for a quick chat?',
    'home.cta_wide_btn': 'Request an appointment',
'contact.email':'Email:',
'contact.wa_t':'WhatsApp',
'contact.wa_prefer':'Prefer WhatsApp — quick and easy.',
'contact.wa_prefer_inline':'Or faster via WhatsApp:',
'contact.wa_hours':'Response: Mon–Fri 9am–5pm',
'btn.whatsapp':'Start WhatsApp chat',
'btn.whatsapp_short':'WhatsApp',
'contact.wa_prefill':'Hi Bekime, I’d like some support / to book a visit. 😊',

    // SERVICES (base)
    'services.title': 'Services',
    'services.intro': 'Personalized support around pregnancy, birth, and the first weeks at home.',
    'services.preg_title': 'Antenatal Support',
    'services.preg_desc': 'Education, wellbeing, birth preparation — a calmer pregnancy.',
    'services.post_title': 'Postpartum Care',
    'services.post_desc': 'Recovery, routines, rest, sleep — I\'m by your side.',
    'services.baby_title': 'Baby Care & Soothing',
    'services.baby_desc': 'Safe bathing, changing, carrying, soothing routines — loving & competent.',
    'services.lact_title': 'Lactation/Nutrition',
    'services.lact_desc': 'Support for breastfeeding or bottle — needs-based and practical.',
    'services.night_title': 'Night Support',
    'services.night_desc': 'A helping hand at night so you can recharge.',
    'services.home_title': 'Home Visits',
    'services.home_desc': 'Plannable appointments at your place in your area.',

    // PRICING (extended)
    'pricing.title': 'Transparent Pricing',
    'pricing.basic_t': 'Intro Call',
    'pricing.basic_d': '30–45 min call or video — clarify needs and questions.',
    'pricing.visit_t': 'Home Visit',
    'pricing.visit_d': 'Per hour. Travel fees depend on distance.',
    'pricing.night_t': 'Night Package',
    'pricing.night_d': '3–4 hours in the evening or at night — on request.',
    'pricing.note': 'Note: No medical treatment. In case of complications, please contact a doctor or midwife.',
    'pricing.basic_price': '€40',
    'pricing.basic_unit': '/ 30–45 min',
    'pricing.basic_f1': 'Phone/Video',
    'pricing.basic_f2': 'Clarify needs',
    'pricing.basic_f3': 'Answer questions',
    'pricing.popular': 'Popular',
    'pricing.visit_price': '€60',
    'pricing.per_hour': '/ hour',
    'pricing.visit_f1': 'At your home',
    'pricing.visit_f2': 'Tailored topics',
    'pricing.visit_f3': 'Travel fee by distance',
    'pricing.night_title2': 'Evening/Night package',
    'pricing.night_price': 'from €180',
    'pricing.night_unit': '/ 3–4 hrs',
    'pricing.night_f1': 'Calm overnight support',
    'pricing.night_f2': 'Sleep & feeding help',
    'pricing.night_f3': 'Extendable on request',
    'pricing.note_ext': 'Note: No medical treatment. In case of complications, please contact a doctor or midwife.',

'about.only.lead':'They say food nourishes the body, science the mind, and love the soul.',
'about.only.p1':'These connections matter greatly during birth and throughout life; they are my guiding principle.',
'about.only.p2':'I am a trained midwife and, during my Level 1 training, assisted alongside midwives and physicians at over 300 births. In that time I gained extensive experience with complications. Even in difficult situations I remain calm — calm that reassures expectant mothers.',
'about.only.p3':'Early on I was responsible for daily basic medical care as well as antenatal care, birth and postpartum support.',
'about.only.p4':'I work flexibly, with focus, warmth and diligence — forward-looking and responsible. With heart, with an eye for the whole, and with a willingness to take responsibility. I also bring the emotional intelligence to integrate well in teams and to provide stability during pregnancy and the postpartum period.',
'about.only.p5':'If I have sparked your interest, I look forward to hearing from you.',
'about.only.sign':'Your midwife<br/>Bekime Elezi',


    // MEMBERSHIPS
    'memberships.title': 'Bundles & Monthly Care',
    'memberships.kicker': 'Predictable support — cancel anytime; invoice or cash accepted.',
    'membership.bundle': 'Bundle',
    'membership.monthly': 'Monthly',
    'membership.comfort_t': 'Comfort (3 visits)',
    'membership.comfort_price': '€165',
    'membership.comfort_note': '(vs €180)',
    'membership.comfort_f1': '3× 1-hour home visits',
    'membership.comfort_f2': 'Priority scheduling',
    'membership.comfort_f3': 'Weekday WhatsApp check-in',
    'membership.premium_t': 'Premium (6 visits)',
    'membership.premium_price': '€320',
    'membership.premium_note': '(vs €360)',
    'membership.premium_f1': '6× 1-hour home visits',
    'membership.premium_f2': '1× evening check-in included',
    'membership.premium_f3': 'Weekly plan tailored to you',
    'membership.basic_t': 'Basic monthly',
    'membership.basic_price': '€120/month',
    'membership.basic_f1': '2 hrs per month (home visits)',
    'membership.basic_f2': 'Roll-over: +1 hr to next month',
    'membership.basic_f3': 'Cancel monthly',
    'membership.plus_t': 'Plus monthly',
    'membership.plus_price': '€220/month',
    'membership.plus_f1': '4 hrs per month',
    'membership.plus_f2': 'Weekday WhatsApp support',
    'membership.plus_f3': 'Cancel monthly',
    'membership.pay_note': 'Pay by invoice, cash or online (e.g., Stripe). Reductions for single parents on request.',

    

    // COMPARISON
    'compare.title': 'Comparison',
    'compare.h.service': 'Service',
    'compare.h.single': 'Single visit',
    'compare.h.comfort': 'Comfort',
    'compare.h.premium': 'Premium',
    'compare.h.month_basic': 'Month Basic',
    'compare.h.month_plus': 'Month Plus',
    'compare.r.hours': 'Hours / month',
    'compare.r.priority': 'Scheduling priority',
    'compare.r.whatsapp': 'WhatsApp support',
    'compare.r.evening': 'Evening check-in',

    // PROCESS
    'process.title': 'How it works',
    'process.s1_t': 'Contact',
    'process.s1_d': 'Send a short request — I\'ll reply shortly.',
    'process.s2_t': 'Intro call',
    'process.s2_d': '30–45 min to get to know each other and clarify needs.',
    'process.s3_t': 'Plan',
    'process.s3_d': 'A personalized support & visit plan.',
    'process.s4_t': 'Care',
    'process.s4_d': 'Home visits, routines, soothing rituals.',

    // TESTIMONIALS
    'testi.title': 'What parents say',
    'testi.1': '“Those first days were so much calmer with Bekime. The evening support saved us.” — Anna & Tim',
    'testi.2': '“Gentle, calm, competent. I felt seen and supported.” — Lea',
    'testi.3': '“Great tips for sleep and breastfeeding — and always reachable for quick questions.” — Family D.',

    // FAQ
    'faq.title': 'FAQ',
    'faq.q1': 'Insurance or private?',
    'faq.a1': 'This care is private. Invoices can be provided for supplemental insurance.',
    'faq.q2': 'How does monthly care work?',
    'faq.a2': 'A monthly hour bundle, cancel anytime. One unused hour can roll over to next month.',
    'faq.q3': 'Which area?',
    'faq.a3': 'Struga and nearby. Travel fees depend on distance.',

    // BUTTONS
    'btn.contact_me': 'Contact me',
    'btn.request': 'Request appointment',
    'btn.inquire': 'Inquire',
    'btn.book': 'Book',
    'btn.start': 'Start'
  }
};

/* ===== keep your existing TRANSLATIONS object above this line ===== */

/* Build WhatsApp URLs using the current language's prefilled text */
function updateWhatsAppLinks(lang){
  const dict = (typeof TRANSLATIONS !== 'undefined' && TRANSLATIONS[lang]) ? TRANSLATIONS[lang] : {};
  const msg = dict['contact.wa_prefill'] || '';
  document.querySelectorAll('a.js-wa').forEach(a=>{
    const raw = a.getAttribute('data-phone') || '';
    const phone = raw.replace(/[^\d]/g,''); // digits only for wa.me
    if (!phone) return;
    const url = 'https://wa.me/' + phone + (msg ? ('?text=' + encodeURIComponent(msg)) : '');
    a.setAttribute('href', url);
  });
}

// Apply translations to all [data-i18n] nodes (+ meta/title tags)
function applyTranslations(lang) {
  const dict = (typeof TRANSLATIONS !== 'undefined' && TRANSLATIONS[lang]) ? TRANSLATIONS[lang] : TRANSLATIONS.de;
  document.documentElement.lang = lang;
  document.documentElement.setAttribute('data-lang', lang);

  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (!key || !dict[key]) return;

    const tag = el.tagName.toLowerCase();
    if (tag === 'meta') {
      // <meta data-i18n="meta.description" name="description">
      el.setAttribute('content', dict[key]);
    } else if (tag === 'title') {
      // <title data-i18n="meta.title_about">...</title>
      el.textContent = dict[key];
      // also ensure the browser tab updates (some browsers rely on document.title)
      document.title = dict[key];
    } else {
      el.textContent = dict[key];
    }
  });

  // Toggle button active state + aria-pressed
  const isDE = lang === 'de';
  const deBtn = document.getElementById('langDe');
  const enBtn = document.getElementById('langEn');
  [deBtn, enBtn].forEach(btn => {
    if (!btn) return;
    btn.classList.remove('active');
    btn.setAttribute('aria-pressed', 'false');
  });
  const target = isDE ? deBtn : enBtn;
  if (target) {
    target.classList.add('active');
    target.setAttribute('aria-pressed', 'true');
  }

  // Refresh WhatsApp links with language-specific prefill
  updateWhatsAppLinks(lang);

  // Persist choice
  try { localStorage.setItem('lang', lang); } catch(_) {}
}

function setupLangSwitch() {
  const saved = (()=>{
    try { return localStorage.getItem('lang') || 'de'; } catch(_) { return 'de'; }
  })();
  applyTranslations(saved);

  const de = document.getElementById('langDe');
  const en = document.getElementById('langEn');
  if (de) de.addEventListener('click', () => applyTranslations('de'));
  if (en) en.addEventListener('click', () => applyTranslations('en'));
}

function setupNav() {
  const toggle = document.getElementById('navToggle');
  const list = document.querySelector('.nav-list');
  if (!toggle || !list) return;
  toggle.addEventListener('click', () => {
    const open = list.classList.toggle('show');
    toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
}

function setYear() {
  const y = document.getElementById('year');
  if (y) y.textContent = new Date().getFullYear();
}

// Optional: FAQ accordion (only acts if elements exist)
function setupFAQ() {
  document.querySelectorAll('.acc-item .acc-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const item = btn.closest('.acc-item');
      if (item) item.classList.toggle('open');
    });
  });
}

document.addEve


  // toggle active state
  document.querySelectorAll('#langDe, #langEn').forEach(btn => btn.classList.remove('active'));
  const target = document.getElementById(lang === 'de' ? 'langDe' : 'langEn');
  if (target) target.classList.add('active');

  localStorage.setItem('lang', lang);


function setupLangSwitch() {
  const saved = localStorage.getItem('lang') || 'de';
  applyTranslations(saved);

  const de = document.getElementById('langDe');
  const en = document.getElementById('langEn');
  if (de) de.addEventListener('click', () => applyTranslations('de'));
  if (en) en.addEventListener('click', () => applyTranslations('en'));
}

function setupNav() {
  const toggle = document.getElementById('navToggle');
  const list = document.querySelector('.nav-list');
  if (!toggle || !list) return;
  toggle.addEventListener('click', () => {
    const open = list.classList.toggle('show');
    toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
}

function setYear() {
  const y = document.getElementById('year');
  if (y) y.textContent = new Date().getFullYear();
}

// FAQ accordion
function setupFAQ() {
  document.querySelectorAll('.acc-item .acc-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const item = btn.closest('.acc-item');
      if (item) item.classList.toggle('open');
    });
  });
}

document.addEventListener('DOMContentLoaded', () => {
  setupLangSwitch();
  setupNav();
  setYear();
  setupFAQ();
});
function updateWhatsAppLinks(lang){
  const dict = TRANSLATIONS[lang] || TRANSLATIONS.de;
  const msg = dict['contact.wa_prefill'] || '';
  document.querySelectorAll('a.js-wa').forEach(a=>{
    const phone = (a.getAttribute('data-phone') || '').replace(/[^\d]/g,''); // keep digits only
    if(!phone) return;
    const url = 'https://wa.me/' + phone + (msg ? ('?text=' + encodeURIComponent(msg)) : '');
    a.setAttribute('href', url);
  });
}
